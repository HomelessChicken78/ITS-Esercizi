<!-- 29. Promise.all per Chiamate Multiple
Richiesto: ottenere post e commenti contemporaneamente.
Usare: Promise.all.
Risultato: dati aggregati visibili insieme. -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise.all</title>
</head>

<body>
    <h1>Post:</h1>
    <ul id="postsList"></ul>

    <h1>Users:</h1>
    <ul id="usersList"></ul>

    <h1>Comments:</h1>
    <ul id="commentsList"></ul>



    <script>
        let postsList = document.getElementById('postsList');
        let usersList = document.getElementById('usersList');
        let commentsList = document.getElementById('commentsList');

        promisePost = fetch("https://jsonplaceholder.typicode.com/posts")
            .then((res) => res.json());

        promiseUsers = fetch("https://jsonplaceholder.typicode.com/users")
            .then((res) => res.json());

        promiseComments = fetch("https://jsonplaceholder.typicode.com/comments")
            .then((res) => res.json());

        Promise.all([promisePost, promiseUsers, promiseComments])
            .then((res) => {
                for (post of res[0]) {
                    let newLi = document.createElement("li");
                    newLi.innerHTML = post.title;
                    postsList.append(newLi);
                }

                for (user of res[1]) {
                    let newLi = document.createElement("li");
                    newLi.innerHTML = user.name;
                    usersList.append(newLi);
                }

                for (comment of res[2]) {
                    let newLi = document.createElement("li");
                    newLi.innerHTML = comment.name;
                    commentsList.append(newLi);
                }
            })

    </script>
</body>

</html>