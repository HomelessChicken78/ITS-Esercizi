<!-- 28. Lista Utenti da API
Richiesto: ottenere elenco utenti remoto e mostrarlo come lista.
Usare: fetch, cicli, creazione nodi DOM.
Risultato: lista di nomi completa ordinata. -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista Utenti</title>
</head>

<body>
    <ul id="result">

    </ul>


    <script>
        let result = document.getElementById('result');

        const fetchaDati = async () => {
            try {
                const res = await fetch("https://jsonplaceholder.typicode.com/users");

                if (!res.ok)
                    throw new Error("Fetch non Ã¨ andata a buon fine. Codice: " + res.status);

                const users = await res.json();

                let listNames = [];
                for (let i = 0; i < users.length; i++) {
                    listNames[i] = `${users[i].name} - email: ${users[i].email}`;
                };
                listNames.sort();

                for (let u of listNames) {
                    let newLi = document.createElement("li");
                    newLi.innerHTML = u;
                    result.append(newLi);
                }
            } catch (error) {
                result.innerHTML = error;
            }
        }

        fetchaDati()
    </script>
</body>

</html>